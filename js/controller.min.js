export default class GameController{constructor(e,t,i,a){this.model=e,this.container=t,this.canvas=i,this.canvasBack=a,this.audioBack=!1,this.muted=!1}init(){let e=this.canvas.getBoundingClientRect();this.canvas.addEventListener("mousemove",t=>{this.model.mouse.x=t.x-e.left,this.model.mouse.y=t.y-e.top}),this.canvas.addEventListener("mouseleave",()=>{this.model.mouse.x=void 0,this.model.mouse.y=void 0}),window.addEventListener("resize",()=>{e=this.canvas.getBoundingClientRect(),this.model.resize()}),this.canvas.addEventListener("click",t=>{let i={x:t.x-e.left,y:t.y-e.top};this.model.click(i)}),window.addEventListener("hashchange",()=>this.updateState()),this.model.getUsersList(this.model),document.querySelector("#main").addEventListener("click",e=>{let t=e.target;if(this.audioBack||(this.playAudioBack(),this.audioBack=!0,this.loadAudio()),"new__game"===t.className&&(this.start(),this.playAudioGame()),"A"===t.nodeName&&this.model.createGameSound("audio/click.mp3"),"sound"===t.id&&(this.muted?(this.muted=!1,this.mutedAudioBack(!1),this.model.isMuted(!1),this.model.createGameSound("audio/click.mp3")):(this.muted=!0,this.mutedAudioBack(!0),this.model.isMuted(!0))),"add__name"===t.className){let e=this.container.querySelector("#newUserName"),t={};t.name=e.value,window.localStorage.setItem("Funny_Defenders_Undead",JSON.stringify(t)),this.model.userName=e.value}if("continue"===t.id){this.container.querySelector(".save__true")||(this.playAudioGame(),this.model.continue())}})}updateState(){this.model.updateState()}start(){this.model.start()}playAudioBack(){this.model.playAudioBack()}mutedAudioBack(e){this.model.mutedAudioBack(e)}playAudioGame(){this.model.playAudioGame()}loadAudio(){this.model.loadAudio()}}